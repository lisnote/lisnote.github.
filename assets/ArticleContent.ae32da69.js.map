{"version":3,"file":"ArticleContent.ae32da69.js","sources":["../../src/views/ArticleContent.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { useRoute } from 'vue-router';\r\nimport lispress from 'lispress';\r\nimport { marked } from 'marked';\r\nimport hljs from 'highlight.js/lib/common';\r\nimport { PressStore } from '../store';\r\nimport { nextTick, onUnmounted } from 'vue';\r\nimport Gitalk from 'gitalk';\r\n\r\nlet pressStore = PressStore();\r\nlet title = useRoute().query.article as string;\r\nlispress.getArticleContent(title).then((text) => {\r\n  if (text.indexOf('---') == 0) {\r\n    text = text.replace(/---(.*\\r?\\n)*?---/, '');\r\n  }\r\n  let element = document.createElement('div');\r\n  element.innerHTML = marked(text);\r\n  element.querySelectorAll('pre>code').forEach((el) => {\r\n    hljs.highlightElement(el as HTMLElement);\r\n  });\r\n  pressStore.article = element;\r\n});\r\n\r\nlet config = lispress.config();\r\nconst gitalk = new Gitalk({\r\n  clientID: config.clientID + '',\r\n  clientSecret: config.clientSecret + '',\r\n  repo: config.username + '.github.io',\r\n  owner: config.username as string,\r\n  admin: [config.username as string],\r\n  id: title.substring(0, 49),\r\n  distractionFreeMode: false,\r\n});\r\nnextTick(() => {\r\n  gitalk.render('gitalk-container');\r\n});\r\nonUnmounted(() => {\r\n  pressStore.article.innerHTML = '';\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div id=\"article-content\">\r\n    <div>\r\n      <div id=\"article\" v-html=\"pressStore.article.innerHTML\"></div>\r\n      <hr />\r\n      <div id=\"gitalk-container\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"scss\">\r\n@import 'highlight.js/styles/default.css';\r\n@import \"gitalk/dist/gitalk.css\";\r\n\r\n#article-content {\r\n  position: relative;\r\n  > div {\r\n    position: absolute;\r\n    top: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    padding: 15px;\r\n    #article {\r\n      pre {\r\n        overflow-x: auto;\r\n      }\r\n      p,\r\n      li {\r\n        word-wrap: break-word;\r\n        word-break: break-word;\r\n      }\r\n      blockquote {\r\n        border-left: 5px solid #ddd;\r\n        padding-left: 5px;\r\n      }\r\n      table {\r\n        word-break: break-word;\r\n        overflow: auto;\r\n        background: #ddd;\r\n        * {\r\n          background: white;\r\n        }\r\n      }\r\n      img {\r\n        max-width: 100%;\r\n      }\r\n    }\r\n    #gitalk-container {\r\n      padding: 10px 0;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":["lispress","hljs"],"mappings":"sgBASA,GAAI,GAAa,IACb,EAAQ,IAAW,MAAM,QAC7BA,EAAS,kBAAkB,CAAK,EAAE,KAAK,AAAC,GAAS,CAC/C,AAAI,EAAK,QAAQ,KAAK,GAAK,GAClB,GAAA,EAAK,QAAQ,oBAAqB,EAAE,GAEzC,GAAA,GAAU,SAAS,cAAc,KAAK,EAClC,EAAA,UAAY,EAAO,CAAI,EAC/B,EAAQ,iBAAiB,UAAU,EAAE,QAAQ,AAAC,GAAO,CACnDC,EAAK,iBAAiB,CAAiB,CAAA,CACxC,EACD,EAAW,QAAU,CAAA,CACtB,EAEG,GAAA,GAASD,EAAS,SAChB,KAAA,GAAS,GAAI,GAAO,CACxB,SAAU,EAAO,SAAW,GAC5B,aAAc,EAAO,aAAe,GACpC,KAAM,EAAO,SAAW,aACxB,MAAO,EAAO,SACd,MAAO,CAAC,EAAO,QAAkB,EACjC,GAAI,EAAM,UAAU,EAAG,EAAE,EACzB,oBAAqB,EAAA,CACtB,EACD,SAAS,IAAM,CACb,EAAO,OAAO,kBAAkB,CAAA,CACjC,EACD,EAAY,IAAM,CAChB,EAAW,QAAQ,UAAY,EAAA,CAChC"}